/dts-v1/;
#include "rk3399pro-toybrick-evb.dtsi"
#include "rk3399-android.dtsi"

/ {
	compatible = "rockchip,rk3399pro-toybrick-evb-linux","rockchip,rk3399pro";

	cif_isp0: cif_isp@ff910000 {
		compatible = "rockchip,rk3399-cif-isp";
		rockchip,grf = <&grf>;
		reg = <0x0 0xff910000 0x0 0x4000>, <0x0 0xff968000 0x0 0x8000>;
		reg-names = "register", "dsihost-register";
		clocks =
			<&cru ACLK_ISP0_NOC>, <&cru ACLK_ISP0_WRAPPER>,
			<&cru HCLK_ISP0_NOC>, <&cru HCLK_ISP0_WRAPPER>,
			<&cru SCLK_ISP0>, <&cru SCLK_DPHY_RX0_CFG>,
			<&cru SCLK_CIF_OUT>, <&cru SCLK_CIF_OUT>,
			<&cru SCLK_MIPIDPHY_REF>;
		clock-names =
			"aclk_isp0_noc", "aclk_isp0_wrapper",
			"hclk_isp0_noc", "hclk_isp0_wrapper",
			"clk_isp0", "pclk_dphyrx",
			"clk_cif_out", "clk_cif_pll",
			"pclk_dphy_ref";
		interrupts = <GIC_SPI 43 IRQ_TYPE_LEVEL_HIGH 0>;
		interrupt-names = "cif_isp10_irq";
		power-domains = <&power RK3399_PD_ISP0>;
		rockchip,isp,iommu-enable = <1>;
		iommus = <&isp0_mmu>;
		status = "disabled";
	};

	cif_isp1: cif_isp@ff920000 {
		compatible = "rockchip,rk3399-cif-isp";
		rockchip,grf = <&grf>;
		reg = <0x0 0xff920000 0x0 0x4000>, <0x0 0xff968000 0x0 0x8000>;
		reg-names = "register", "dsihost-register";
		clocks =
		<&cru ACLK_ISP1_NOC>, <&cru ACLK_ISP1_WRAPPER>,
		<&cru HCLK_ISP1_NOC>, <&cru HCLK_ISP1_WRAPPER>,
		<&cru SCLK_ISP1>, <&cru PCLK_ISP1_WRAPPER>,
		<&cru SCLK_DPHY_TX1RX1_CFG>,
		<&cru PCLK_MIPI_DSI1>, <&cru SCLK_MIPIDPHY_CFG>,
		<&cru SCLK_CIF_OUT>, <&cru SCLK_CIF_OUT>,
		<&cru SCLK_MIPIDPHY_REF>;
		clock-names =
			"aclk_isp1_noc", "aclk_isp1_wrapper",
			"hclk_isp1_noc", "hclk_isp1_wrapper",
			"clk_isp1", "pclkin_isp1",
			"pclk_dphytxrx",
			"pclk_mipi_dsi","mipi_dphy_cfg",
			"clk_cif_out", "clk_cif_pll",
			"pclk_dphy_ref";
		interrupts = <GIC_SPI 44 IRQ_TYPE_LEVEL_HIGH 0>;
		interrupt-names = "cif_isp10_irq";
		power-domains = <&power RK3399_PD_ISP1>;
		rockchip,isp,iommu-enable = <1>;
		iommus = <&isp1_mmu>;
		status = "disabled";
	};
};

&cif_isp0 {
	rockchip,camera-modules-attached = <&camera0>;
	status = "okay";
};

&cif_isp1 {
	rockchip,camera-modules-attached = <&camera1>;
	status = "okay";
};

&fiq_debugger {
	pinctrl-0 = <&uart2c_xfer>;
};

&hdmi_dp_sound {
	status = "okay";
};

&isp0 {
	status = "okay";
};

&isp1 {
	status = "okay";
};

&isp0_mmu {
	status = "okay";
};

&isp1_mmu {
	status = "okay";
};

&rk_key {
	status = "disabled";
};

&route_edp {
	status = "okay";
};

&route_dsi {
	status = "okay";
};

&pinctrl {
	cam_mclk {
		cam_default_pins: cam-default-pins {
			rockchip,pins = <2 11 RK_FUNC_3 &pcfg_pull_none>;
		};
	};
};

&i2c1 {
	status = "okay";

	camera0: camera-module@10 {
		status = "okay";
		compatible = "omnivision,ov9750-v4l2-i2c-subdev";
		reg = <0x10>;
		device_type = "v4l2-i2c-subdev";
		clocks = <&cru SCLK_CIF_OUT>;
		clock-names = "clk_cif_out";

		pinctrl-names = "default";
		pinctrl-0 = <&cam_default_pins>;

		rockchip,pd-gpio = <&gpio4 RK_PD1 GPIO_ACTIVE_LOW>;
		rockchip,rst-gpio = <&gpio4 RK_PD2 GPIO_ACTIVE_LOW>;

		rockchip,camera-module-mclk-name = "clk_cif_out";
		rockchip,camera-module-facing = "back";
		rockchip,camera-module-name = "MDG001";
		rockchip,camera-module-len-name = "NONE";
		rockchip,camera-module-fov-h = "80";
		rockchip,camera-module-fov-v = "65";
		rockchip,camera-module-orientation = <0>;
		rockchip,camera-module-iq-flip = <0>;
		rockchip,camera-module-iq-mirror = <0>;
		rockchip,camera-module-flip = <1>;
		rockchip,camera-module-mirror = <1>;

		rockchip,camera-module-defrect0 = <1280 960 0 0 1280 960>;
		rockchip,camera-module-flash-support = <0>;
		rockchip,camera-module-mipi-dphy-index = <0>;
		as-master = <0>;
	};

};

&i2c2 {
	status = "okay";

	camera1: camera-module@36 {
		status = "okay";
		compatible = "omnivision,ov9750-v4l2-i2c-subdev";
		reg = <0x36>;
		device_type = "v4l2-i2c-subdev";
		clocks = <&cru SCLK_CIF_OUT>;
		clock-names = "clk_cif_out";

		pinctrl-names = "default";
		pinctrl-0 = <&cam_default_pins>;

		rockchip,pd-gpio = <&gpio3 RK_PD2 GPIO_ACTIVE_LOW>;
		rockchip,rst-gpio = <&gpio3 RK_PD7 GPIO_ACTIVE_LOW>;

		rockchip,camera-module-mclk-name = "clk_cif_out";
		rockchip,camera-module-facing = "back";
		rockchip,camera-module-name = "MDG001";
		rockchip,camera-module-len-name = "NONE";
		rockchip,camera-module-fov-h = "80";
		rockchip,camera-module-fov-v = "65";
		rockchip,camera-module-orientation = <0>;
		rockchip,camera-module-iq-flip = <0>;
		rockchip,camera-module-iq-mirror = <0>;
		rockchip,camera-module-flip = <1>;
		rockchip,camera-module-mirror = <1>;

		rockchip,camera-module-defrect0 = <1280 960 0 0 1280 960>;
		rockchip,camera-module-flash-support = <0>;
		rockchip,camera-module-mipi-dphy-index = <1>;
		as-master = <0>;
	};

};

